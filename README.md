# wikidoc

This python script allows to create a nice looking PDF file from a github wiki, which can be used as offline/printable documentation.

For it to work, all wiki files must be created as github markdown files and must contain only pure HTML (which is supported by the github wiki markdown), but no markdown. Furthermore the wiki home page `Home.md` must be present and must contain some special comments to configure and customize wikidoc (see example below).

The script builds one large HTML file from the different wiki files and pipes that into [wkhtmltox](http://www.wkhtmltopdf.org/) to create the PDF. It uses the same file order as the github wiki to join the different wiki files and adds a header based on the filenames in the same way as the github wiki is doing it. Except for the home page: The custom WIKIDOC HEAD can be used to add a header for the home page.

The look of the final PDF depends on the defined CSS in the WIKIDOC HEAD section. These styles will not be applied to the wiki itself, because they are hidden in a comment. Only the generated wikidoc html file (which is later "printed" as pdf by wkhtmltopdf) will actually use those style definitions. Thus, it is possible to add class properties to images or other html elements in the wiki files and define those classes in the WIKIDOC HEAD section to tweak the look in the PDF: Enforcing page-breaks with the css property `page-break-before` or `page-break-after` or resize images with the css property `width`. 

As an example, the offline documentation of the [jTDC repository](https://github.com/jobisoft/jTDC/tree/master/documentation) is generated by wikidoc.

## wikidoc CONFIG

One of the special comments required in `Home.md` is the WIKIDOC CONFIG comment, containing a list of parameter definitions. All except "filename" will be directly send as parameters to wkhtmltox (see [documentation](http://wkhtmltopdf.org/usage/wkhtmltopdf.txt) of wkhtmltox for a list of possible options). The provided parameters are not verified by wikidoc. If the filename is missing, the default "wikidoc.pdf" will be used.

## wikidoc HEAD and FOOT

The joined wiki files are put between the customizable HTML HEAD and HTML FOOT segments, which must be stored in `Home.md` as special comments. The HTML HEAD may contain the ###_WIKIDOC_GENDATE_### placeholder, which will be replaced by the current date.


## usage

After cloning/pulling the latest version of the github wiki repository, run:
```
./wikidoc.py <path-to-wkhtmltopdf> <path-to-github-wiki-repository>
```
## todo
 - allow markdown

## example Home.md

```
<!-- WIKIDOC CONFIG
--filename documentation.pdf
--page-size A4
--margin-top 2cm
--margin-left 2cm
--margin-bottom 2cm
--margin-right 2cm
WIKIDOC CONFIG  -->

<!-- WIKIDOC HEAD
<html>
<head>
<STYLE type='text/css'>
    html { font-family: Verdana,Geneva,sans-serif; font-size: 10pt; }
    table { border-collapse: collapse;  margin: 1em 0 1em 0; width: 90%; margin-left: auto; margin-right: auto; }
    table, th, td {	border: 1px solid #ccc; }
    table tr:first-child { background-color: #eee; }
    table td { font-family: Verdana,Geneva,sans-serif; font-size: 8pt; vertical-align: top; padding: 5px; }
    .breakbefore, h1 { page-break-before: always; }
    .covertitle { padding-top: 40%; text-align: right; font-weight:bold; font-size: 30pt; }
    .generated { font-weight:normal; font-size: 6pt; }
</STYLE>
</head>
<body>
<div class='covertitle'>Example Documentation<br>
<span class='generated'>generated from github wiki: ###_WIKIDOC_GENDATE_###</span></div>
<h1>Preface</h1>
WIKIDOC HEAD -->

<!-- WIKIDOC FOOT
</body></html>
WIKIDOC FOOT -->

Only this text will be displayed on the wiki home page. In this example, 
its header in the generated PDF is "Preface", as defined in the WIKIDOC HEAD.

```
